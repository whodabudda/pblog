
// Add the pblogModal title
$('#pblogModal h5').html("<i class='glyphicon glyphicon-pencil modal-title' id='pblogModalLongTitle'></i> Edit Comment");
 
// Render the edit form
$('.modal-body-placeholder').html('<%= j render partial: "form", locals: { ismodal:  "true" } %>');

//////////////////////////////////////////////////////////////////////////////////


//Show the dynamic pblogModal
$('#pblogModal').modal("show");
 
// Set focus to the first element
$('#pblogModal').on('shown.bs.modal', function () {
	  $('.first_input').focus()
 });

CKEDITOR.replace( 'comment_text', {
	<% if admin_on? %>
    toolbar: 'AdminToolbar' 
	<% else %>
    toolbar: 'UserToolbar' 
	<% end %>
} );

//CKEDITOR.replace( 'comment_text', {
//	toolbar: <%=  admin_on? ? 'AdminToolbar' : 'UserToolbar' %>
//} );

$(document).ready(function(){
$.fn.modal.Constructor.prototype._enforceFocus = function () {
    modal_this = this
    $(document).on('focusin.modal', function (e) {
        if (modal_this.$element[0] !== e.target && !modal_this.$element.has(e.target).length
        // add whatever conditions you need here:
        &&
        !$(e.target.parentNode).hasClass('cke_dialog_ui_input_select') && !$(e.target.parentNode).hasClass('cke_dialog_ui_input_text')) {
        	alert("Hit the focus event!")
            modal_this.$element.focus()
        }
    })
};

});
