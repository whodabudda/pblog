
// Add the pblogModal title
$('#pblogModal h5').html("<i class='glyphicon glyphicon-pencil modal-title' id='pblogModalLongTitle'></i> Edit Comment");
 
// Render the edit form
$('.modal-body-placeholder').html('<%= j render partial: "form", locals: { ismodal:  "true" } %>');

//////////////////////////////////////////////////////////////////////////////////
//Show the dynamic pblogModal
$('#pblogModal').modal("show");
 
// Set focus to the first element
$('#pblogModal').on('shown.bs.modal', function () {
	  $('.first_input').focus()
 });
 MyClassicEditor
    .create( document.querySelector( '#editor' ) )
    .then( editor => {
      <%if admin_on? %>
      editor.isReadOnly = true;  //don't allow admins to edit the user's content
      <%end%>
        console.log( editor );
    } )
    .catch( error => {
        console.error( error );
   } );


//import "/app/javascript/ckeditor/myck_classic_editor.js"

<%#= javascript_pack_tag 'ckeditor' %>
/*
MyClassicEditor
    // Note that you do not have to specify the plugin and toolbar configuration â€” using defaults from the build.
    .create( document.querySelector( '.editor' ) )
    .then( editor => {
        console.log( 'Editor was initialized', editor );
    } )
    .catch( error => {
        console.error( error.stack );
    } );

//CKEDITOR.replace( 'comment_text', {
//	<% if admin_on? %>
//    toolbar: 'AdminToolbar' 
//	<% else %>
//    toolbar: 'UserToolbar' 
//	<% end %>
//} );

//CKEDITOR.replace( 'comment_text', {
//	toolbar: <%=  admin_on? ? 'AdminToolbar' : 'UserToolbar' %>
//} );
*/
/*
$.fn.modal.Constructor.prototype._enforceFocus = function _enforceFocus() {
    var _this4 = this;
    $(document).off(Event.FOCUSIN).on(Event.FOCUSIN, function (event) {
        if (
            document !== event.target
            && _this4._element !== event.target
            && $(_this4._element).has(event.target).length === 0
            && !$(event.target.parentNode).hasClass('cke_dialog_ui_input_select')
            && !$(event.target.parentNode).hasClass('cke_dialog_ui_input_text')
        ) {
            alert("Hit the focus event!")
            _this4._element.focus();
        }
    });
};
$(document).ready(function(){
$.fn.modal.Constructor.prototype._enforceFocus = function () {
    var modal_this = this
    $(document).on('focusin.modal', function (e) {
        if (modal_this.$element[0] !== e.target && !modal_this.$element.has(e.target).length
        // add whatever conditions you need here:
        &&
        !$(e.target.parentNode).hasClass('cke_dialog_ui_input_select') && !$(e.target.parentNode).hasClass('cke_dialog_ui_input_text')) {
        	alert("Hit the focus event!")
            modal_this.$element.focus()
        }
    })
}

});
*/
