<%
  @ismodal = local_assigns[:ismodal] 
  adminid = 0
  if @ismodal.nil?
    @ismodal = false
  end
  if admin_signed_in? && admin_on?
   adminid = current_admin.id
  end
%>

<%
my_debug("in comment_review form partial: #{action_name}, ismodal: #{@ismodal}")
%>
<%= form_for @comment_review , remote: false, :html => { :role => "form" } do |f| %>
  <% if @ismodal %>
    <div class='modal-body'> </div>
  <%end%>
 <div class="field ">
    <%= f.label :New_Review_Commentary_Here %><br>
    <%= f.text_area :review_text, :id => 'editor', :class => 'review-text-input editor'  %>
  </div>

  <div class="field">
     <%= f.text_field :admin_id, value: adminid, hidden: true,readonly: true%>
  </div>
  <div class="field">
     <%= f.text_field :comment_id, value: @comment_id , hidden: true,readonly: true%>
  </div>
  <% @footer_message = (user_signed_in? ? "user id: #{current_user.id}" : "no user signed in") + " / comment_id: #{@comment_id}" %>
  <% if @ismodal %>
    </div> <!-- modal-body-->
    <div class="modal-footer">
      <div class="container col-xs-12">
      <div class="row justify-content-between" >
      <div class="col-md-6">
        <p> <%= @footer_message %> </p>
      </div>
      <div class="col-md-5 offset-md-1"> 
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <%= f.submit class: "btn btn-primary" %>
      </div>
    </div>
    </div>
    </div>
  <%else%>
    <div class="actions">
     <%= f.submit %>
    </div>
  <%end%>
  <br>
  <p>---- or ----</p>
  <%= link_to 'Cancel - Go Back', url_for( :back) %> 
<% end # form_for block%>

<script type="module">
 MyClassicEditor
    .create( document.querySelector( '#editor' ) )
    .then( editor => {
        console.log( editor );
    } )
    .catch( error => {
        console.error( error );
   } );
</script>

